<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Dead Networks</title>
  <link rel="stylesheet" href="./styles.css">
  <link rel="icon" href="./favicon.ico" type="image/x-icon">
</head>
<body>

  <div id="container">
    <!-- Keep all your entries here exactly as before -->
    <div class="entry">
      <h2><a href="https://en.wikipedia.org/wiki/Bastn%C3%A4s" style="color: white; text-decoration: underline;" target="_blank">Bastnäs, Sweden</a></h2>
      <time>1830s–1900s</time>
      <p>Site of one of the earliest rare earth mineral discoveries; cradle of lanthanide extraction in Europe.</p>
    </div>

    <!-- ... all other entries ... -->

    <div class="entry">
      <h2><a href="https://en.wikipedia.org/wiki/Massachusetts_Memory_Project" style="color: white; text-decoration: underline;" target="_blank">Massachusetts Memory Project, Boston</a></h2>
      <time>1997–2008</time>
      <p>Statewide Archival Server: Hosted digital scans of town records, maps, and oral histories; absorbed into library networks.</p>
    </div>
  </div>

  <!-- Controls bar -->
  <div id="controls">
    <button id="toggle">Pause</button>
    <label>Speed
      <input type="range" id="speed" min="0.1" max="3" step="0.1" value="0.6">
    </label>
  </div>

  <script>
    window.addEventListener('load', () => {
      const container = document.getElementById('container');
      const items = Array.from(container.querySelectorAll('.entry'));
      items.sort((a, b) => {
        const year = el => {
          const text = el.querySelector('time')?.textContent || '';
          const m = text.match(/(\d{4})/);
          return m ? parseInt(m[1], 10) : Number.POSITIVE_INFINITY;
        };
        return year(a) - year(b);
      });
      container.innerHTML = '';
      items.forEach(el => container.appendChild(el));

      const root =
        document.scrollingElement ||
        document.documentElement ||
        document.body;

      const speedInput = document.getElementById('speed');
      const toggleBtn  = document.getElementById('toggle');

      let step = parseFloat(speedInput.value);
      let paused = false;
      let pauseUntil = 0;

      speedInput.addEventListener('input', () => {
        step = parseFloat(speedInput.value);
      });

      toggleBtn.addEventListener('click', () => {
        paused = !paused;
        toggleBtn.textContent = paused ? 'Resume' : 'Pause';
      });

      ['wheel','touchstart','touchmove','keydown'].forEach(evt => {
        window.addEventListener(evt, () => { pauseUntil = performance.now() + 1200; }, { passive: true });
      });

      function tick() {
        const now = performance.now();
        const max = root.scrollHeight - window.innerHeight;

        if (!paused && max > 0 && now >= pauseUntil) {
          let next = root.scrollTop + step;
          if (next >= max) next = 0;
          root.scrollTop = next;
        }
      }

      setInterval(tick, 16); // ~60 fps
    });
  </script>

</body>
</html>
